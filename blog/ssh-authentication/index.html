<!DOCTYPE html>
<html lang="en-gb">

<head>
  <title>Ssh Authentication | John Croft</title>

  <meta charset="UTF-8">
  <meta name="language" content="en">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  
  

  <link rel="shortcut icon" type="image/png" href="/favicon.ico" />


  
  
    
 
  
  
  
  
  
  
    
    <link type="text/css" rel="stylesheet" href="/css/post.min.6e38cf87bb5b61efafde0f64d37ed3daef3b36115bbe2d604b486e9d1313060f.css" integrity="sha256-bjjPh7tbYe&#43;v3g9k037T2u87NhFbvi1gS0hunRMTBg8="/>
  
    
    <link type="text/css" rel="stylesheet" href="/css/custom.min.5854acdab4a3a3fbdc3102c31388201cc67070327618fb4e4a0382727a8f3cd1.css" integrity="sha256-WFSs2rSjo/vcMQLDE4ggHMZwcDJ2GPtOSgOCcnqPPNE="/>
  
  
   
   
    

<script type="application/ld+json">
  
    {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jwcroft.github.io\/"
      },
      "articleSection" : "blog",
      "name" : "Ssh Authentication",
      "headline" : "Ssh Authentication",
      "description" : "",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2021",
      "datePublished": "2021-08-27 13:06:14 \u002b0200 CEST",
      "dateModified" : "2021-08-27 13:06:14 \u002b0200 CEST",
      "url" : "https:\/\/jwcroft.github.io\/blog\/ssh-authentication\/",
      "wordCount" : "765",
      "keywords" : ["Blog"]
    }
  
  </script>
</head>

<body>
  <div class="burger__container">
  <div class="burger" aria-controls="navigation" aria-label="Menu">
    <div class="burger__meat burger__meat--1"></div>
    <div class="burger__meat burger__meat--2"></div>
    <div class="burger__meat burger__meat--3"></div>
  </div>
</div>
 

  <nav class="nav" id="navigation">
  <ul class="nav__list">
    
    
      <li>
        <a  href="/about">about</a>
      </li>
    
      <li>
        <a  href="/cv">cv</a>
      </li>
    
      <li>
        <a  href="/">home</a>
      </li>
    
      <li>
        <a  class="active"
         href="/blog">notes</a>
      </li>
    
  </ul>
</nav>


  <main>
    
    

    <div class="flex-wrapper">
      <div class="post__container">
        <div class="post">
          <header class="post__header">
            <h1 id="post__title">Ssh Authentication</h1>
            <time datetime="2021-08-27 13:06:14 &#43;0200 CEST" class="post__date">Aug 27, 2021</time> 
          </header>
          <article class="post__content">
              
<h2 id="ssh-authentication">SSH Authentication<a class="anchor" href="#ssh-authentication">#</a></h2>
<p>A few years ago, when Linux was new and exciting to me, I was frustrated in my attempts to get <em>ssh authentication</em> working.
Indeed, in the beginning, as I was fumbling around trying to make my newly bought Raspberry Pi do anything other than obstinately sit there, all the guides and tutorials presupposed a working knowledge of SSH.</p>
<p>Well, I&rsquo;m writing this post in order to tell my younger self what the deal is.</p>
<h2 id="the-ssh-secure-shell-protocol">The SSH (secure shell) protocol<a class="anchor" href="#the-ssh-secure-shell-protocol">#</a></h2>
<p>So what is SSH and why is it a thing?
Early attempts at remote shell access resulted in protocols such as Telnet, which while secure offer absolutely no security whatsoever. Any man-in-the-middle could see all your information in plaintext&hellip; and what&rsquo;s the first thing you do on a remote shell? You send your username and password&hellip;
So, all in all, not the best solution.</p>
<p>SSH or the Secure SHell protocol was designed to replace plaintext protocols and, nominally, it encrypts network traffic between two devices.
It is based on <em>public-key cryptography</em>, which means that authentication uses a pair of unique keys: one <em>public</em> and one <em>private</em>.
The public key is usually on a central server that one wishes to access. This key may be read by anyone.
The private key, however, resides on the user&rsquo;s device and must be kept secret.</p>
<p>In simple lock and key terms, the private key is The Key and the public key is The Lock. Anyone may try unlocking The Lock with their Key, but only the owner&rsquo;s Key will succeed 1.</p>
<p>This type of cryptography uses nominally one-way functions, in which an inverse function is essentially impossible to find.
Perhaps as a consequence, the public key can be derived from the private key, but <em>not</em> the other way around.</p>
<p>So, SSH uses this unique keypair to encrypt traffic, which can only be decrypted with the same pair.
But since the private key is meant to be unique to a specific device and user, this means that this keypair also authenticates the user.
Therefore, when using SSH, a password is not strictly required. The mere fact that one has the correct private-key is usually much stronger than any password. Of course, one can enable password authentication on top of the public-key mechanism, but the tradeoff is less convenience for marginally more security in most circumstances.</p>
<p>One of the most convenient uses for passwordless authentication is automation. Communication between remote devices can happen without user intervention. One example is github authentication, which uses SSH nowadays.
When I type <code>git push</code>, git authenticates me using SSH and my keypair, no username or password required.</p>
<p>1 Though technically possible to brute-force the matching key, current keypair-generator generate keys of something like 2048 bits. So you&rsquo;ll be stuck trying to brute-force it until the heat-death of the universe yadda-yadda. Prohibitively expensive, in practice.</p>
<p>Ok, now on to practical matters.
This is all native on Linux, by the way, which uses OpenSSH as its SSH implementation. Windows users should use a dedicated program such as PuTTy. PuTTy uses a slightly different implementation and key format, but it is convertible to and from OpenSSH.</p>
<h2 id="generating-a-keypair">Generating a keypair<a class="anchor" href="#generating-a-keypair">#</a></h2>
<p>To generate a paired private and public key, simply use</p>
<pre><code>ssh-keygen
</code></pre>
<p>It will ask you where to store the files and if you would like to set a password (this is a password on the keypair, nothing to do with the normal user-account password). I usually leave the password blank as it is simply not convenient to introduce yet another password.</p>
<p>The default settings result in the following fingerprint:</p>
<pre><code>ssh-keygen -l -f &lt;private key&gt;
&gt; 3072 SHA256:pO+XSPb0ULinhr3ChGygZW8PdbXIcXqhsEopQzdB0g4 user@hostname (RSA)
</code></pre>
<p>This tells us that the key contains 3072 bits and uses the RSA cryptographic scheme.
By default, it puts the keypair in the <code>~/.ssh</code> directory. You&rsquo;ll want to rename them to something descriptive and sane. Occasionally, I&rsquo;ve had to sort through my keys and it&rsquo;s a real hassle having a bunch of anonymous one-offs. Do I dare delete them and risk breaking some automated process that I&rsquo;ve forgotten about? Get it right from the beginning is my advice.</p>
<h2 id="permissions">Permissions<a class="anchor" href="#permissions">#</a></h2>
<p>The .ssh directory MUST have full owner priveleges <code>drwx------</code>, public keys must have <code>rw-r--r--</code> and private keys must have <code>rw-------</code>. If the permissions are too lax SSH will refuse to use them.</p>
<p>Of course, the public key must now be moved to the remote server. This is often the biggest hassle. Usually you need physical access to both machines when setting this up first time.</p>
<p>FUCK. DOES SSH WORK WITHOUT A PRIVATE KEY?
WHY AM I WRITING ALL THIS SHIT?</p>


              
          </article>
          

 <div class="pagination">
  
    <a class="pagination__item" href="https://jwcroft.github.io/blog/ellipses/test/">
        <span class="pagination__label">Previous Post</span>
        <span class="pagination__title">Test</span>
    </a>
  

  
    <a class="pagination__item" href="https://jwcroft.github.io/blog/hdl-metaprogramming/">
      <span class="pagination__label">Next Post</span>
      <span class="pagination__title" >HDL Metaprogramming</span>
    </a>
  
</div>

          
          <footer class="post__footer">
            


<div class="social-icons">
  
     
    
      <a class="social-icons__link" rel="me" title="GitHub"
         href="https://github.com/jwcroft"
         target="_blank" rel="noopener">
        <div class="social-icons__icon" style="background-image: url('https://jwcroft.github.io/svg/github.svg')"></div>
      </a>
    
     
</div>

            <p>Â© 2022</p>
          </footer>
          </div>
      </div>
      
    </div>
    

  </main>

   

  
  <script src="/js/index.min.301a8b0870381bf76b3b5182e8966d363a0474281183439beb024d8b8228fc66.js" integrity="sha256-MBqLCHA4G/drO1GC6JZtNjoEdCgRg0Ob6wJNi4Io/GY=" crossorigin="anonymous"></script>
  
  
  <script src="https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js"></script>

  
  <script src="https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"
    data-autoloader-path="https://unpkg.com/prismjs@1.20.0/components/"></script>

  


</body>

</html>
